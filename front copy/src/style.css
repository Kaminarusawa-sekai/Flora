/* 引入现代字体 */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

body {
  background-color: #050505; /* 深邃黑 */
  font-family: 'Inter', sans-serif;
  color: #ffffff;
  overflow: hidden;
}

/* 背景：不再是硬网格，而是深邃的噪点 + 极淡的极光 */
.modern-bg {
  background: 
    radial-gradient(circle at 15% 50%, rgba(76, 29, 149, 0.08), transparent 40%),
    radial-gradient(circle at 85% 30%, rgba(16, 185, 129, 0.05), transparent 40%);
  background-color: #09090b;
}

/* 叠加噪点纹理增加质感 */
.noise-overlay {
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 0;
}

/* --- 卡片核心样式: Glassmorphism --- */
.glass-card {
  background: rgba(30, 30, 35, 0.6); /* 半透明黑 */
  backdrop-filter: blur(12px);         /* 毛玻璃模糊 */
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.08); /* 极细内描边 */
  box-shadow: 
    0 20px 40px -10px rgba(0, 0, 0, 0.5), /* 投影 */
    inset 0 1px 0 rgba(255, 255, 255, 0.1); /* 顶部高光 */
  border-radius: 24px; /* 大圆角 */
  transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
}

/* 选中态：发光辉光 */
.glass-card.selected {
  border-color: rgba(255, 255, 255, 0.2);
  box-shadow: 
    0 0 0 4px rgba(255, 255, 255, 0.05),
    0 20px 40px -10px rgba(0, 0, 0, 0.7);
  transform: translateY(-2px) scale(1.02);
}

/* --- 进度条流光 --- */
/* 绿色极光 (Running/Success) */
.gradient-bar-success {
  background: linear-gradient(90deg, #4ade80 0%, #2dd4bf 50%, #3b82f6 100%);
  box-shadow: 0 0 20px rgba(45, 212, 191, 0.4);
}

/* 红色警报 (Failed) */
.gradient-bar-failed {
  background: linear-gradient(90deg, #f87171 0%, #f43f5e 50%, #e11d48 100%);
  box-shadow: 0 0 20px rgba(244, 63, 94, 0.4);
}

/* --- 连线特效优化 --- */
/* 普通连线 */
.vue-flow__edge-path {
  stroke: #3f3f46;
  stroke-width: 2;
}

/* 冲击波连线：不再是虚线，而是高亮的实体光束 */
.vue-flow__edge.shockwave path {
  stroke: url(#shockwave-gradient) !important; /* 使用SVG渐变 */
  stroke-width: 4;
  filter: drop-shadow(0 0 8px rgba(244, 63, 94, 0.6));
  stroke-dasharray: 20;
  animation: beam-flow 0.5s linear infinite;
}

@keyframes beam-flow {
  to { stroke-dashoffset: -40; }
}

/* 死亡状态 */
.card-killed {
  filter: grayscale(1) brightness(0.5);
  border-color: rgba(255, 50, 50, 0.3);
  transform: scale(0.95);
}

/* 滚动条美化 */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* 状态颜色定义 */
.status-running {
  border-color: rgba(45, 212, 191, 0.5);
  color: #2dd4bf;
  box-shadow: 0 0 10px rgba(45, 212, 191, 0.2);
}

.status-success {
  border-color: rgba(74, 222, 128, 0.5);
  color: #4ade80;
  box-shadow: 0 0 10px rgba(74, 222, 128, 0.2);
}

.status-failed {
  border-color: rgba(244, 63, 94, 0.5);
  color: #f43f5e;
  box-shadow: 0 0 10px rgba(244, 63, 94, 0.2);
}

.status-waiting {
  border-color: rgba(250, 204, 21, 0.5);
  color: #facc15;
  box-shadow: 0 0 10px rgba(250, 204, 21, 0.2);
}

/* 呼吸灯效果 */
.animate-pulse-slow {
  animation: pulse-glow 2s cubic-bezier(0.25, 0.8, 0.25, 1) infinite;
}

@keyframes pulse-glow {
  0%, 100% {
    opacity: 1;
    box-shadow: 0 0 10px rgba(45, 212, 191, 0.2);
  }
  50% {
    opacity: 0.9;
    box-shadow: 0 0 20px rgba(45, 212, 191, 0.4);
  }
}

/* 节点被击中时的故障抖动 */
.node-glitch {
  animation: glitch-anim 0.3s cubic-bezier(.25, .46, .45, .94) both infinite;
  color: #f43f5e !important;
  border-color: #f43f5e !important;
  background: rgba(244, 63, 94, 0.1) !important;
}

@keyframes glitch-anim {
  0% { transform: translate(0) }
  20% { transform: translate(-2px, 2px) }
  40% { transform: translate(-2px, -2px) }
  60% { transform: translate(2px, 2px) }
  80% { transform: translate(2px, -2px) }
  100% { transform: translate(0) }
}
